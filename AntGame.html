<!DOCTYPE html>
<html lang="en">
    <head>
        
    </head>
    <body>
        <script>
            class Ant{
                constructor(id,direction){
                    this.direction=direction;
                    this.id=id;
                    
                };

                getName()
                {
                    return "ant"+this.id;
                }

                getPosition(){
                    let name=this.getName();
                    return document.getElementById(name).offsetLeft;
                }

                move() {
                    let name=this.getName(),elem=this.getPosition();
                    if(this.direction)
                        document.getElementById(name).style.left=(elem+10)+"px";
                    else
                        document.getElementById(name).style.left=(elem-10)+"px";
                };
                
                changeDirection(){
                    this.direction=!this.direction;
                }
            };

            class Wood{
                constructor(length){
                    this.length = length;
                }
                fall(position){
                    return position<100||position>700;
                }
            };

            class PlayRoom{
                buildDirections(){
                    let ret=[];
                    for(let i=0;i<5;i++)
                        ret[i]=Math.floor(Math.random()*10)%2;
                    return ret;	
                };

                constructor(){
                    this.incTime=1;
                    this.velocity=10;
                    this.ants=[];
                    this.directions=this.buildDirections();
                    this.lives=new Array(5).fill(1);
                    this.wood=new Wood(600);
                    for(let i=0;i<5;i++)
                    {
                        let tmp=new Ant(i,this.directions[i]);
                        this.ants.push(tmp);
                    }
                }

                run(){
                    for(let i=0;i<5;i++)
                    {
                        let now=this.ants[i];
                        now.move();

                        if(this.wood.fall(now.getPosition()))
                        {
                            let name="ant"+i;
                            document.getElementById(name).style.display="none";
                            this.lives[i]=0;
                        }    
                    }   
                    for(let i=0;i<5;i++)
                    {
                        if(this.lives[i])//the first ant survives
                        {
                            for(let j=i+1;j<5;j++)
                            {
                                if(this.lives[j]&&this.collision(this.ants[i],this.ants[j]))
                                {
                                    this.ants[i].changeDirection();
                                    this.ants[j].changeDirection();
                                }
                            }
                        }
                        
                    }
                }

                collision(ant1,ant2){
                    return ant1.getPosition()==ant2.getPosition();
                }


            };

            class CreepingGame{
                constructor(){
                    this.time=0;
                    this.end=false;
                    
                }
            }

            
            var pr=new PlayRoom();
            function f1(){
                pr.run();
            }
            
            function f2(){
                
            }

        </script>

        <div>
            <div id="wood"></div>
            <div style="left:160px" class="ant" id="ant0"></div>
            <div style="left:260px" class="ant" id="ant1"></div>
            <div style="left:320px" class="ant" id="ant2"></div>
            <div style="left:420px" class="ant" id="ant3"></div>
            <div style="left:600px" class="ant" id="ant4"></div>
        </div>
        <button onclick="f1()">f1</button>
        <button onclick="f2()">f2</button>
    </body>
    <style>
        /* 2px=1cm */
        #wood
        {
            position:absolute;
            width:600px;
            height:40px;
            background-color:yellow;
            top:200px;
            left:100px;
        }
        .ant
        {
            background-color:blue;
            width:20px;
            height:20px;
            position:absolute;
            top:200px;

        }
        #ant0
        {
            background-color:blue;
        }
        #ant1
        {
            background-color:green;
        }
        #ant2
        {
            background-color:red;
        }
        #ant3
        {
            background-color:black;
        }
        #ant4
        {
            background-color:white;
        }
    </style>
</html>
